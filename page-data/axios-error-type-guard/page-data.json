{"componentChunkName":"component---src-templates-blog-template-js","path":"/axios-error-type-guard/","result":{"data":{"cur":{"id":"aee8a021-2207-5c4f-a1a5-2558c287a883","html":"<p>최근 <a href=\"https://github.com/prgrms-web-devcourse/Team-Gaerval-Dadok-FE\">다독다독</a> 프로젝트를 진행하면서 Axios 에러 처리와 관련된 고민을 많이 했었다. 타입스크립트에 익숙치 않았을 뿐더러 커스텀 에러 코드를 사용하면서 구글링도 쉽지 않았는데..🥹 고민의 과정을 적어보려고 한다.</p>\n<h2 id=\"custom-error-code\" style=\"position:relative;\"><a href=\"#custom-error-code\" aria-label=\"custom error code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom Error Code</h2>\n<p>API 요청이 실패한 경우, 다독다독 서버는 Error Response body에 아래와 같이 사전에 정의된 에러 코드를 함께 보내주고 있다. 클라이언트 측에서는 에러 코드에 따라 필요한 핸들링을 하면 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACpUlEQVQ4y61T227aQBCln9H+QSzlI9p/SaT8TvIScoEfqNRKaUiT9qkXqVWkPlQogdy4GDAYsE0gxvYuu50z8YJzoX3pSofd9YzPnDljcrr9PWd/fv/qtHywet1qrNithlWrX1s3tSur3qxZP09/WCefjq2jj4fW129frIvLinVePbMqKei8Ur2srJ6dl19qrXM5/NR//3p31SjrWsuOm7Yt206H4MhO15FXN9eyclGVtUZdtjsd6QWBHPp+Bl7sjwLdbLXeMiGW3XGOoijR4/F4Np5M9OTuTofhVIfTqY6iWMdxrIWUOhGCzskDRHEsEXO63cMFYbNZGlEV3/dEv99Xw+FQeZ7Hu+u6KkkSRcnLIAiacg/mhI7jlEidvr29FayGlBAJAyokKVBK6dnsOcyYcDAYfFgotO0SkZFCnwmfWyBcgqeE1FZpSn6FYSiQ9Lf1OP4sIfnGLY9GI0Gk+o6HEmJIfEYx7Eb9PxUaQniI1nEmb/hl7MbDJcsMZUHY6/VoyiM9jaYiTmLsOqCp4xmUCin4TJNHUR4WivqBD+UCBXtub0HYbrdL5CNaEkgGIe6UxC/hTl8C2poTun1X1xt1PfSGAl10e92HLactCuMRFARBwDCfUnZxYfKWdg4Qx4KQKpdSv8T99zbjVqEmiiK+G5j446E8IISHmCKCSIIn9E3OfUMMyBJN6C8KC0Qq/QlhmjxXiBeg0KhEe1lC3GELxZ4S4sPOECo6K1KkKFmRWv4vk48qu3BPc5YTpkNhEqquSAUDhNhR6H5mioshhzpOUsKDbMvH8M0AtmC68DGdJLeN5yYHdwwOMVhAoo4M4Yutra03xWJxY3t7ey2fz68DhUKBsbe3t76zszPfTXx3d3d9f38fz9Zo39jc3HzNbGD9n/gDg7Fn3Lfz1fsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"error_code_docs_image\"\n        title=\"error_code_docs_image\"\n        src=\"/static/53b25cbd9fdc43e2854592e4085b02ce/37523/errorcode-doc.png\"\n        srcset=\"/static/53b25cbd9fdc43e2854592e4085b02ce/e9ff0/errorcode-doc.png 180w,\n/static/53b25cbd9fdc43e2854592e4085b02ce/f21e7/errorcode-doc.png 360w,\n/static/53b25cbd9fdc43e2854592e4085b02ce/37523/errorcode-doc.png 720w,\n/static/53b25cbd9fdc43e2854592e4085b02ce/302a4/errorcode-doc.png 1080w,\n/static/53b25cbd9fdc43e2854592e4085b02ce/07a9c/errorcode-doc.png 1440w,\n/static/53b25cbd9fdc43e2854592e4085b02ce/21cdd/errorcode-doc.png 1680w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>커스텀 에러 코드들은 아래와 같이 string 리터럴 타입으로 미리 선언해 두었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">ServiceErrorCode</span> <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> <span class=\"token string\">'CM1'</span>\n  <span class=\"token operator\">|</span> <span class=\"token string\">'CM2'</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token operator\">|</span> <span class=\"token string\">'9798'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>서버에서 에러에 대한 설명이 담긴 메세지도 보내주지만, 어떤 처리 없이 바로 사용하기에는 무리가 있어 보였다. 그래서 클라이언트 측에서 사용할 에러 메세지도 별도로 관리하면 좋을 것 같았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token constant\">ERROR_MESSAGE</span><span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span>ServiceErrorCode<span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">U1</span><span class=\"token operator\">:</span> <span class=\"token string\">'이미 존재하는 닉네임이에요.'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">A3</span><span class=\"token operator\">:</span> <span class=\"token string\">'유효한 리프레시 토큰이 아니에요. 다시 로그인 해 주세요.'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">A4</span><span class=\"token operator\">:</span> <span class=\"token string\">'액세스 토큰이 만료되었어요. 새로운 액세스 토큰 발급 요청을 보내주세요.'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>필요한 것들은 어느정도 정의한 것 같으니.. 이제 응답에서 에러 코드만 잘 뽑아서 사용하면 될 것 같은데..!?!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACpklEQVQoz63T/0vTQRzHcX8K+i0jiJWBP9QPZVFRSq5+UIww+kKE9cMUVCysKEHTMlGaZuX8UjnTMs3GdB+n032zTZ2raZvMLXNaWoNmpGERFfRD/VJuzzZT1x/Qwd37Do7HHdy9IgKBAP+rhayI0OTb9x/YXkwz5H6Ny9SFyyDgtPYzOPYO26gP58v3GHqstLVpEQQDFosN2+AwHRpTcK2ntVXLzMzcAroATnhnkUg1SLKl3JAkoixMJSc5HkmRAkmJwIUqLbHxx4lcvY116+PYHJPIjpi9bIrezVpRHKsit2E0DoTBSd8c6WVdFFU0YxNqmHZ20qOsJatMTVZ5N5dqjSQkpREdLUYUJSZp30F6G0upTNtP0vZYRBvE9Pba/gU/crKojT69GkeHjC/jBrzPBPKKq0graSe31kzifgmidbEcSDyG09QKX14w3F5NXnIcUVFxmEzWMPjq7Rw3m4xMT7mx65twG+oYaMxHV5WB6k4h1yrl7BQns2LlFk6nZdJXmY/i4im8/Qrk0kJWrdmKxWoJgzMfv2J3uhkYsOIam8Teq+ZxcynPR+x4RmyMPNGhvFvGo5piZJfOUnA8AVn6YSoyjyDNyaLuegE+rycMen0fMGtVjI86mZoYZai9giH9QxwuT/Dkp3jcQdhhwj1opF8vIM09R6p4Myd2baQgJYGfXh2BH58ILIGeqXc8uJKC+VYGppp0NNKj9MgkuNSldCjuIciLUTeUo1J3o+nSotMbqL58huxD8WQd3MPt4vNMv5kI39A3+xmzshp761UcQjlOrZzh4OMMthQi1F/DpKrH2HwToUlOp6KBjpZ6NC1yVLVXqZffJ++KnJeTbxfB4O8OhSWw8NPBvxicUPntX87A33H+F/5gD9X538Ea8C/vX0rKH9AFoE8SIpNsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"it&#39;s me..\"\n        title=\"it&#39;s me..\"\n        src=\"/static/f3ca978b96baa18f6f8fffe05806ecfb/37523/itsme.png\"\n        srcset=\"/static/f3ca978b96baa18f6f8fffe05806ecfb/e9ff0/itsme.png 180w,\n/static/f3ca978b96baa18f6f8fffe05806ecfb/f21e7/itsme.png 360w,\n/static/f3ca978b96baa18f6f8fffe05806ecfb/37523/itsme.png 720w,\n/static/f3ca978b96baa18f6f8fffe05806ecfb/302a4/itsme.png 1080w,\n/static/f3ca978b96baa18f6f8fffe05806ecfb/1132d/itsme.png 1158w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>역시 타입스크립트는 마음처럼 쉽게 되지 않았다..^_^..</p>\n<h2 id=\"axioserror-타입-가드\" style=\"position:relative;\"><a href=\"#axioserror-%ED%83%80%EC%9E%85-%EA%B0%80%EB%93%9C\" aria-label=\"axioserror 타입 가드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AxiosError 타입 가드</h2>\n<p>AxiosResponse에 담긴 에러 코드에 안전하게 접근하려면 먼저 해당 에러가 AxiosError 임이 보장되어야 했다. 자바스크립트에서는 어떤 값이든 에러로 throw 할 수 있기 때문에 catch를 통해 전달받는 Error 객체는 기본적으로 <code class=\"language-text\">unknown</code> 타입이다.</p>\n<p>Axios 깃헙에서 <a href=\"https://github.com/axios/axios/tree/main#typescript\">AxiosError 타입 가드</a>와 관련된 내용을 발견할 수 있었다. <code class=\"language-text\">isAxiosError()</code> 라는 함수를 제공하는데, 조건문을 통과하면 error 객체는 AxiosError로 타입이 추론된다!</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user/1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>axios<span class=\"token punctuation\">.</span><span class=\"token function\">isAxiosError</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>서버로부터 받은 응답 body는 <code class=\"language-text\">error.response.data</code>에 담겨있는데, response는 옵셔널한 속성이라 조건을 추가해야만 <code class=\"language-text\">data</code>를 보장받을 수 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>axios<span class=\"token punctuation\">.</span><span class=\"token function\">isAxiosError</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> error<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> code <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> error<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"errorresponsetype-정의\" style=\"position:relative;\"><a href=\"#errorresponsetype-%EC%A0%95%EC%9D%98\" aria-label=\"errorresponsetype 정의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ErrorResponseType 정의</h2>\n<p>여기까지 하면 <code class=\"language-text\">code</code>는 <code class=\"language-text\">any</code> 타입이다. 미리 선언했던 <code class=\"language-text\">SERVICE_ERROR_CODE</code> 타입으로 좁혀야 한다. <code class=\"language-text\">isAxiosError()</code>의 타입 선언을 살펴보니 제네릭을 받고 있다!</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">isAxiosError</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">D</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>payload<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> payload <span class=\"token keyword\">is</span> AxiosError<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">D</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>제네릭 T가 어디로 전달되는지 따라가보니, AxiosError를 거쳐 AxiosResponse의 data 타입으로 지정된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AxiosError<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">D</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Error</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\n      message<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n      code<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n      config<span class=\"token operator\">?</span><span class=\"token operator\">:</span> InternalAxiosRequestConfig<span class=\"token operator\">&lt;</span><span class=\"token constant\">D</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n      request<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n      response<span class=\"token operator\">?</span><span class=\"token operator\">:</span> AxiosResponse<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">D</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">AxiosResponse<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">D</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래처럼 응답 스키마를 타입으로 정의하고 제네릭으로 넘겨서 <code class=\"language-text\">code</code>의 타입을 보장받을 수 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">APIErrorResponse</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  code<span class=\"token operator\">:</span> ServiceErrorCode<span class=\"token punctuation\">;</span>\n  status<span class=\"token operator\">:</span> HttpStatusCode<span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">code</code>의 타입이 <code class=\"language-text\">ServiceErrorCode</code> 니까 <code class=\"language-text\">ERROR_MESSAGE</code> 객체에 키 값으로 넣을 수도 있게 되었다!</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>axios<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">isAxiosError</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>APIErrorResponse<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> error<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> code <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> error<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> <span class=\"token constant\">ERROR_MESSAGE</span><span class=\"token punctuation\">[</span>code<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"사용자-정의-타입-가드\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98-%ED%83%80%EC%9E%85-%EA%B0%80%EB%93%9C\" aria-label=\"사용자 정의 타입 가드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자 정의 타입 가드</h2>\n<p>타입적으로는 해결된 것 같은데.. 문득 핸들링되지 않은 서버 에러는 응답에 에러 코드가 포함되지 않을테니, 의도치 않은 런타임 에러가 발생할 수도 있겠다는 생각이 들었다.\n<code class=\"language-text\">isAxiosError()</code>처럼 <strong>응답에 에러 코드가 포함되어 있는지 확인하고 타입적으로도 보장하는 타입 가드 함수</strong>를 만들면 좋을 것 같았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> isAxiosErrorWithCustomCode <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  error<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> error <span class=\"token keyword\">is</span> RequiredWith<span class=\"token operator\">&lt;</span>AxiosError<span class=\"token operator\">&lt;</span>APIErrorResponse<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'response'</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">typeof</span> error <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">&amp;&amp;</span>\n    error <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token generic-function\"><span class=\"token function\">isAxiosError</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>APIErrorResponse<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token operator\">!</span><span class=\"token operator\">!</span>error<span class=\"token punctuation\">.</span>response <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token operator\">!</span><span class=\"token operator\">!</span>error<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>code <span class=\"token operator\">&amp;&amp;</span>\n    error<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>code <span class=\"token keyword\">in</span> <span class=\"token constant\">ERROR_MESSAGE</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>AxiosError 객체에서 response 속성만 Required로 바뀐 타입이 필요했는데, 새롭게 정의하는 것 보다 기존 AxiosError 객체를 재사용하면 좋을 것 같아 <code class=\"language-text\">RequiredWith</code> 라는 유틸리티 타입을 만들었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">RequiredWith<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span> <span class=\"token keyword\">extends</span> <span class=\"token keyword\">keyof</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token constant\">T</span> <span class=\"token operator\">&amp;</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token constant\">P</span> <span class=\"token keyword\">in</span> <span class=\"token constant\">K</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token constant\">P</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>옵셔널한 속성들이 많아서 조건문 뎁스가 계속 깊어졌었는데, 이렇게 함수로 추출하니 코드가 훨씬 깔끔해졌다!</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleAxiosError</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isAxiosErrorWithCustomCode</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">showToast</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> message<span class=\"token operator\">:</span> <span class=\"token string\">'잠시 후 다시 시도해주세요.'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> code <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> error<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> <span class=\"token constant\">ERROR_MESSAGE</span><span class=\"token punctuation\">[</span>code<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 에러 코드에 따라 원하는 로직을 수행하면 된다.</span>\n  <span class=\"token function\">showToast</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> message<span class=\"token punctuation\">,</span> duration<span class=\"token operator\">:</span> <span class=\"token number\">3000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>뚝딱뚝딱 한 것 같지만.. 가독성 좋은 코드를 위해 고민을 많이 하다보니 팀원들에게 미안할 정도로 오랫동안 붙잡고 있었다..ㅠ.ㅠ 하지만 그만큼 타입스크립트와 가까워질 수 있었던 시간이었다.</p>\n<p>여전히 고민되는 부분이 많이 있긴 하다. 백엔드에서 보내주는 에러 코드 자체가 직관적이지 않아 코드를 작성할 때 여러번 확인해야하는 불편함도 있고, 커스텀 에러 클래스들을 만들어서 어느정도 체계화된 에러 핸들링 방식을 구축해두고 싶은 욕심도 있다.</p>\n<p>하지만 뭐든 처음부터 완벽하게 하기란 쉽지 않은 것 같다. 당장 이 코드를 작성하기까지도 꽤 오랜 시간이 걸렸으니.. 아직 공부할게 많구나~!! 😆</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://immigration9.github.io/typescript/2022/01/09/error-typescript.html\">(번역) TypeScript에서 catch block error message 사용하기</a></li>\n<li><a href=\"https://kentcdodds.com/blog/get-a-catch-block-error-message-with-typescript\">(원본) Kent C. Dodds - Get a catch block error message with TypeScript</a></li>\n</ul>\n<br />\n<blockquote>\n<p>더 좋은 방법, 개선점이 있다면 댓글로 알려주세요! 🙇🏻‍♀️</p>\n</blockquote>\n<br />\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#custom-error-code\">Custom Error Code</a></li>\n<li><a href=\"#axioserror-%ED%83%80%EC%9E%85-%EA%B0%80%EB%93%9C\">AxiosError 타입 가드</a></li>\n<li><a href=\"#errorresponsetype-%EC%A0%95%EC%9D%98\">ErrorResponseType 정의</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98-%ED%83%80%EC%9E%85-%EA%B0%80%EB%93%9C\">사용자 정의 타입 가드</a></li>\n<li><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</div>","excerpt":"최근 다독다독 프로젝트를 진행하면서 Axios 에러 처리와 관련된 고민을 많이 했었다. 타입스크립트에 익숙치 않았을 뿐더러 커스텀 에러 코드를 사용하면서 구글링도 쉽지 않았는데..🥹 고민의 과정을 적어보려고 한다. Custom Error Code API 요청이 실패한 경우, 다독다독 서버는 Error Response body에 아래와 같이 사전에 정의된 에러 코드를 함께 보내주고 있다. 클라이언트 측에서는 에러 코드에 따라 필요한 핸들링을 하면 된다.  커스텀 에러 코드들은 아래와 같이 string 리터럴 타입으로 미리 선언해 두었다. 서버에서 에러에 대한 설명이 담긴 메세지도 보내주지만, 어떤 처리 없이 바로 사용하기에는 무리가 있어 보였다. 그래서 클라이언트 측에서 사용할 에러 메세지도 별도로 관리하면 좋을 것 같았다. 필요한 것들은 어느정도 정의한 것 같으니.. 이제 응답에서 에러 코드만 잘 뽑아서 사용하면 될 것 같은데..!?!  역시 타입스크립트는 마음처럼 쉽게 되지 않았…","frontmatter":{"date":"April 05, 2023","title":"타입스크립트에서 Axios Error 처리하기","categories":"프론트엔드 타입스크립트","author":"Fry","emoji":"🚧"},"fields":{"slug":"/axios-error-type-guard/"}},"next":{"id":"410ba680-4c44-5996-ad79-a0f9ca9e34e0","html":"<!-- ![javascript](thumnail-js.png) -->\n<p><strong><code class=\"language-text\">Array.from()</code></strong> 을 사용하면 다양한 값으로 배열을 채울 수 있다.</p>\n<ol>\n<li>첫번째 매개변수로 <strong><code class=\"language-text\">arrayLike(유사 배열 객체)</code></strong> 혹은 <strong><code class=\"language-text\">반복 가능한 객체</code></strong> 를 전달하면 이를 <strong>얕게 복사</strong>해서 새로운 Array 객체를 만든다.</li>\n<li>optional 매개변수로 <strong><code class=\"language-text\">mapFn(매핑함수)</code></strong> 콜백을 전달할 수 있는데, <strong>중간에 다른 배열을 생성하지 않는다</strong>는 점을 제외하면 <strong><code class=\"language-text\">Array.from(obj).map(mapFn, thisArg)</code></strong> 와 같다.</li>\n</ol>\n<br>\n<h2 id=\"1차원-배열\" style=\"position:relative;\"><a href=\"#1%EC%B0%A8%EC%9B%90-%EB%B0%B0%EC%97%B4\" aria-label=\"1차원 배열 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1차원 배열</h2>\n<h3 id=\"하나의-수로-채우기\" style=\"position:relative;\"><a href=\"#%ED%95%98%EB%82%98%EC%9D%98-%EC%88%98%EB%A1%9C-%EC%B1%84%EC%9A%B0%EA%B8%B0\" aria-label=\"하나의 수로 채우기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>하나의 수로 채우기</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0으로 초기화</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [0, 0, 0, 0, 0]</span></code></pre></div>\n<p>ES6에서 도입된 <strong><code class=\"language-text\">Array.fill()</code></strong> 메소드를 사용하여 배열을 한번에 채우는 방법도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token function\">Array</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token number\">Infinity</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 무한대로 초기화</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [Infinity, Infinity, Infinity, Infinity. Infinity]</span></code></pre></div>\n<br>\n<h3 id=\"1씩-증가하는-배열-만들기\" style=\"position:relative;\"><a href=\"#1%EC%94%A9-%EC%A6%9D%EA%B0%80%ED%95%98%EB%8A%94-%EB%B0%B0%EC%97%B4-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"1씩 증가하는 배열 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1씩 증가하는 배열 만들기</h3>\n<p>1씩 증가하는 배열을 만들고 싶다면 <strong><code class=\"language-text\">Array.map()</code></strong> 의 두번째 인자인 index를 활용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0부터 1씩 증가</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [0, 1, 2, 3, 4]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1부터 1씩 증가</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3, 4, 5]</span></code></pre></div>\n<p>0부터 1씩 증가하는 배열을 만들 때 <strong><code class=\"language-text\">Array.keys()</code></strong> 로 배열의 인덱스를 추출하여 만들 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [0, 1, 2, 3, 4]</span></code></pre></div>\n<p>2부터 2씩 증가하는 배열은 다음과 같이 만들면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2부터 2씩 증가</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [2, 4, 6, 8, 10]</span></code></pre></div>\n<br>\n<h2 id=\"2차원-배열\" style=\"position:relative;\"><a href=\"#2%EC%B0%A8%EC%9B%90-%EB%B0%B0%EC%97%B4\" aria-label=\"2차원 배열 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2차원 배열</h2>\n<h3 id=\"빈-배열로-채우기\" style=\"position:relative;\"><a href=\"#%EB%B9%88-%EB%B0%B0%EC%97%B4%EB%A1%9C-%EC%B1%84%EC%9A%B0%EA%B8%B0\" aria-label=\"빈 배열로 채우기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>빈 배열로 채우기</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [[], [], [], [], []]</span></code></pre></div>\n<h3 id=\"하나의-수로-채우기-1\" style=\"position:relative;\"><a href=\"#%ED%95%98%EB%82%98%EC%9D%98-%EC%88%98%EB%A1%9C-%EC%B1%84%EC%9A%B0%EA%B8%B0-1\" aria-label=\"하나의 수로 채우기 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>하나의 수로 채우기</h3>\n<p>그래프 탐색, 최소 비용 알고리즘 등에 많이 사용된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">Array</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token number\">Infinity</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* [[Infinity, Infinity, Infinity, Infinity. Infinity],\n    [Infinity, Infinity, Infinity, Infinity. Infinity],\n    [Infinity, Infinity, Infinity, Infinity. Infinity],\n    [Infinity, Infinity, Infinity, Infinity. Infinity],\n    [Infinity, Infinity, Infinity, Infinity. Infinity]] */</span></code></pre></div>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://velog.io/@sy3783/JS%EB%B0%B0%EC%97%B4-%EC%B1%84%EC%9A%B0%EA%B8%B0\">JS팁_1. 배열 채우기</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/from\">MDN Array.from()</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#1%EC%B0%A8%EC%9B%90-%EB%B0%B0%EC%97%B4\">1차원 배열</a></p>\n<ul>\n<li><a href=\"#%ED%95%98%EB%82%98%EC%9D%98-%EC%88%98%EB%A1%9C-%EC%B1%84%EC%9A%B0%EA%B8%B0\">하나의 수로 채우기</a></li>\n<li><a href=\"#1%EC%94%A9-%EC%A6%9D%EA%B0%80%ED%95%98%EB%8A%94-%EB%B0%B0%EC%97%B4-%EB%A7%8C%EB%93%A4%EA%B8%B0\">1씩 증가하는 배열 만들기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2%EC%B0%A8%EC%9B%90-%EB%B0%B0%EC%97%B4\">2차원 배열</a></p>\n<ul>\n<li><a href=\"#%EB%B9%88-%EB%B0%B0%EC%97%B4%EB%A1%9C-%EC%B1%84%EC%9A%B0%EA%B8%B0\">빈 배열로 채우기</a></li>\n<li><a href=\"#%ED%95%98%EB%82%98%EC%9D%98-%EC%88%98%EB%A1%9C-%EC%B1%84%EC%9A%B0%EA%B8%B0-1\">하나의 수로 채우기</a></li>\n</ul>\n</li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</div>","frontmatter":{"date":"April 27, 2022","title":"JavaScript 특정 값으로 배열 채우기 : Array.from()","categories":"자바스크립트","author":"Fry","emoji":"🏷"},"fields":{"slug":"/js-array-from/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://gxxrxn.github.io","comments":{"utterances":{"repo":"gxxrxn/gxxrxn.github.io"}}}}},"pageContext":{"slug":"/axios-error-type-guard/","nextSlug":"/js-array-from/","prevSlug":""}},"staticQueryHashes":["1073350324","2938748437"]}